{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SensorPayload",
  "description": "Comprehensive sensor data payload from Huawei Watch 5 to Cloud",
  "version": "2.0.0",
  "type": "object",
  "required": ["timestamp"],
  "properties": {
    "timestamp": {
      "type": "integer",
      "description": "Unix timestamp in milliseconds"
    },
    "deviceId": {
      "type": "string",
      "description": "Unique identifier for the source device"
    },
    
    "vitals": {
      "type": "object",
      "description": "Core physiological metrics",
      "properties": {
        "heartRate": { "type": "integer", "minimum": 0, "maximum": 255 },
        "restingHeartRate": { "type": "integer", "minimum": 0, "maximum": 255 },
        "hrvRMSSD": { "type": "number", "description": "Heart Rate Variability (RMSSD) in ms" },
        "spo2": { "type": "number", "minimum": 0, "maximum": 100, "description": "Blood Oxygen Saturation %" },
        "skinTemperature": { "type": "number", "description": "Skin temperature in Celsius" },
        "bodyTemperature": { "type": "number", "description": "Estimated core body temperature in Celsius" },
        "bloodGlucose": { "type": "number", "description": "Blood glucose in mmol/L" },
        "bloodPressure": { 
          "type": "object",
          "properties": {
            "systolic": { "type": "integer" },
            "diastolic": { "type": "integer" }
          }
        },
        "vo2Max": { "type": "number", "description": "Maximum oxygen uptake in ml/kg/min" },
        "ecgResult": { "type": "string", "description": "Result of ECG measurement (e.g. Normal, AFib)" }
      }
    },

    "body": {
      "type": "object",
      "description": "Body composition metrics",
      "properties": {
        "height": { "type": "number", "description": "Height in meters" },
        "weight": { "type": "number", "description": "Weight in kg" },
        "bodyFat": { "type": "number", "description": "Body fat percentage" },
        "bmi": { "type": "number", "description": "Body Mass Index" }
      }
    },

    "activity": {
      "type": "object",
      "description": "Physical activity metrics",
      "properties": {
        "stepCount": { "type": "integer", "minimum": 0 },
        "calories": { "type": "integer", "description": "Total calories burned" },
        "activeHours": { "type": "number", "description": "Hours spent active today" },
        "distance": { "type": "number", "description": "Distance in meters" },
        "speed": { "type": "number", "description": "Speed in m/s" },
        "isIntensity": { "type": "boolean", "description": "True if medium/high intensity activity" }
      }
    },

    "runningForm": {
      "type": "object",
      "description": "Advanced running metrics",
      "properties": {
        "groundImpactAcceleration": { "type": "number", "description": "Impact force in g" },
        "verticalOscillation": { "type": "number", "description": "Vertical motion in cm" },
        "groundContactTime": { "type": "integer", "description": "Ground contact time in ms" }
      }
    },

    "environment": {
      "type": "object",
      "description": "Environmental context",
      "properties": {
        "ambientLight": { "type": "number", "description": "Light intensity in lux" },
        "barometer": { "type": "number", "description": "Atmospheric pressure in hPa" },
        "altitude": { "type": "number", "description": "Altitude in meters" },
        "location": {
          "type": "object",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" },
            "accuracy": { "type": "number" }
          }
        }
      }
    },

    "motion": {
      "type": "object",
      "description": "Raw IMU sensor data",
      "properties": {
        "accelerometer": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"} } 
        },
        "gyroscope": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"} } 
        },
        "magnetometer": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"} } 
        },
        "gravity": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"} } 
        },
        "linearAcceleration": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"} } 
        },
        "rotationVector": { 
          "type": "object", 
          "properties": { "x": {"type": "number"}, "y": {"type": "number"}, "z": {"type": "number"}, "w": {"type": "number"} } 
        }
      }
    },

    "status": {
      "type": "object",
      "properties": {
        "wearDetection": { 
          "type": "string", 
          "enum": ["WORN", "NOT_WORN", "UNKNOWN"] 
        },
        "batteryLevel": { "type": "integer", "minimum": 0, "maximum": 100 }
      }
    },

    "wellbeing": {
      "type": "object",
      "properties": {
        "stressScore": { "type": "integer", "minimum": 0, "maximum": 100 },
        "emotionStatus": { "type": "integer", "description": "1: Unpleasant, 2: Neutral, 3: Pleasant" },
        "sleepScore": { "type": "integer", "minimum": 0, "maximum": 100 },
        "sleepStatus": { "type": "string", "description": "Current sleep status (e.g. Light, Deep, Awake)" }
      }
    }
  }
}